üB
E/home/azadmin/docker-dotnet-k8s-app/Controllers/StudentsController.cs
	namespace		 	

StudentApp		
 
.		 
Controllers		  
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
StudentsController #
:$ %
ControllerBase& 4
{ 
private 
readonly 
ILogger  
<  !
StudentsController! 3
>3 4
_logger5 <
;< =
private 
readonly 
StudentContext '
_context( 0
;0 1
public 
StudentsController !
(! "
ILogger" )
<) *
StudentsController* <
>< =
logger> D
,D E
StudentContextF T
contextU \
)\ ]
{ 	
_logger 
= 
logger 
; 
_context 
= 
context 
; 
} 	
[ 	
HttpGet	 
] 
public 
async 
Task 
< 
ActionResult &
<& '
IEnumerable' 2
<2 3
Student3 :
>: ;
>; <
>< =
GetStudents> I
(I J
)J K
{ 	
_logger 
. 
LogInformation "
(" #
$str# :
): ;
;; <
try 
{ 
var 
students 
= 
await $
_context% -
.- .
Students. 6
.6 7
ToListAsync7 B
(B C
)C D
;D E
return   
Ok   
(   
students   "
)  " #
;  # $
}!! 
catch"" 
("" 
	Exception"" 
ex"" 
)""  
{## 
_logger$$ 
.$$ 
LogError$$  
($$  !
$"$$! #
$str$$# M
{$$M N
ex$$N P
.$$P Q
Message$$Q X
}$$X Y
"$$Y Z
)$$Z [
;$$[ \
return%% 

StatusCode%% !
(%%! "
$num%%" %
,%%% &
$str%%' >
)%%> ?
;%%? @
}&& 
}'' 	
[** 	
HttpPost**	 
]** 
public++ 
async++ 
Task++ 
<++ 
ActionResult++ &
<++& '
Student++' .
>++. /
>++/ 0

AddStudent++1 ;
(++; <
Student++< C
student++D K
)++K L
{,, 	
_logger-- 
.-- 
LogInformation-- "
(--" #
$str--# :
)--: ;
;--; <
try.. 
{// 
if00 
(00 
student00 
==00 
null00 #
)00# $
{11 
return22 

BadRequest22 %
(22% &
$str22& 7
)227 8
;228 9
}33 
_context55 
.55 
Students55 !
.55! "
Add55" %
(55% &
student55& -
)55- .
;55. /
await66 
_context66 
.66 
SaveChangesAsync66 /
(66/ 0
)660 1
;661 2
return88 
CreatedAtAction88 &
(88& '
nameof88' -
(88- .
GetStudents88. 9
)889 :
,88: ;
new88< ?
{88@ A
id88B D
=88E F
student88G N
.88N O

student_id88O Y
}88Z [
,88[ \
student88] d
)88d e
;88e f
}99 
catch:: 
(:: 
	Exception:: 
ex:: 
)::  
{;; 
_logger<< 
.<< 
LogError<<  
(<<  !
$"<<! #
$str<<# O
{<<O P
ex<<P R
.<<R S
Message<<S Z
}<<Z [
"<<[ \
)<<\ ]
;<<] ^
return== 

StatusCode== !
(==! "
$num==" %
,==% &
$str==' >
)==> ?
;==? @
}>> 
}?? 	
[BB 	
HttpPutBB	 
(BB 
$strBB 
)BB 
]BB 
publicCC 
asyncCC 
TaskCC 
<CC 
IActionResultCC '
>CC' (
UpdateStudentCC) 6
(CC6 7
intCC7 :
idCC; =
,CC= >
StudentCC? F
studentCCG N
)CCN O
{DD 	
_loggerEE 
.EE 
LogInformationEE "
(EE" #
$strEE# C
,EEC D
idEEE G
)EEG H
;EEH I
tryFF 
{GG 
ifHH 
(HH 
idHH 
!=HH 
studentHH !
.HH! "

student_idHH" ,
)HH, -
{II 
returnJJ 

BadRequestJJ %
(JJ% &
$strJJ& ;
)JJ; <
;JJ< =
}KK 
varMM 
existingStudentMM #
=MM$ %
awaitMM& +
_contextMM, 4
.MM4 5
StudentsMM5 =
.MM= >
	FindAsyncMM> G
(MMG H
idMMH J
)MMJ K
;MMK L
ifNN 
(NN 
existingStudentNN #
==NN$ &
nullNN' +
)NN+ ,
{OO 
returnPP 
NotFoundPP #
(PP# $
)PP$ %
;PP% &
}QQ 
_contextSS 
.SS 
EntrySS 
(SS 
existingStudentSS .
)SS. /
.SS/ 0
CurrentValuesSS0 =
.SS= >
	SetValuesSS> G
(SSG H
studentSSH O
)SSO P
;SSP Q
awaitTT 
_contextTT 
.TT 
SaveChangesAsyncTT /
(TT/ 0
)TT0 1
;TT1 2
returnVV 
	NoContentVV  
(VV  !
)VV! "
;VV" #
}WW 
catchXX 
(XX 
	ExceptionXX 
exXX 
)XX  
{YY 
_loggerZZ 
.ZZ 
LogErrorZZ  
(ZZ  !
$"ZZ! #
$strZZ# Q
{ZZQ R
exZZR T
.ZZT U
MessageZZU \
}ZZ\ ]
"ZZ] ^
)ZZ^ _
;ZZ_ `
return[[ 

StatusCode[[ !
([[! "
$num[[" %
,[[% &
$str[[' >
)[[> ?
;[[? @
}\\ 
}]] 	
[`` 	

HttpDelete``	 
(`` 
$str`` 
)`` 
]`` 
publicaa 
asyncaa 
Taskaa 
<aa 
IActionResultaa '
>aa' (
DeleteStudentaa) 6
(aa6 7
intaa7 :
idaa; =
)aa= >
{bb 	
_loggercc 
.cc 
LogInformationcc "
(cc" #
$strcc# C
,ccC D
idccE G
)ccG H
;ccH I
trydd 
{ee 
varff 
studentff 
=ff 
awaitff #
_contextff$ ,
.ff, -
Studentsff- 5
.ff5 6
	FindAsyncff6 ?
(ff? @
idff@ B
)ffB C
;ffC D
ifgg 
(gg 
studentgg 
==gg 
nullgg #
)gg# $
{hh 
returnii 
NotFoundii #
(ii# $
)ii$ %
;ii% &
}jj 
_contextll 
.ll 
Studentsll !
.ll! "
Removell" (
(ll( )
studentll) 0
)ll0 1
;ll1 2
awaitmm 
_contextmm 
.mm 
SaveChangesAsyncmm /
(mm/ 0
)mm0 1
;mm1 2
returnoo 
	NoContentoo  
(oo  !
)oo! "
;oo" #
}pp 
catchqq 
(qq 
	Exceptionqq 
exqq 
)qq  
{rr 
_loggerss 
.ss 
LogErrorss  
(ss  !
$"ss! #
$strss# Q
{ssQ R
exssR T
.ssT U
MessagessU \
}ss\ ]
"ss] ^
)ss^ _
;ss_ `
returntt 

StatusCodett !
(tt! "
$numtt" %
,tt% &
$strtt' >
)tt> ?
;tt? @
}uu 
}vv 	
}ww 
}xx Ù

5/home/azadmin/docker-dotnet-k8s-app/Models/Student.cs
	namespace 	

StudentApp
 
. 
Models 
{ 
public 

class 
Student 
{ 
public 
int 

student_id 
{ 
get  #
;# $
set% (
;( )
}* +
public 
string 
student_name "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
student_age 
{  
get! $
;$ %
set& )
;) *
}+ ,
public		 
string		 
student_addr		 "
{		# $
get		% (
;		( )
set		* -
;		- .
}		/ 0
public

 
double

 
student_percent

 %
{

& '
get

( +
;

+ ,
set

- 0
;

0 1
}

2 3
public 
string 
student_qual "
{# $
get% (
;( )
set* -
;- .
}/ 0
public 
int 
student_year_passed &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
} 
} ©

</home/azadmin/docker-dotnet-k8s-app/Models/StudentContext.cs
	namespace 	

StudentApp
 
. 
Models 
{ 
public 

class 
StudentContext 
:  !
	DbContext" +
{ 
public 
StudentContext 
( 
DbContextOptions .
<. /
StudentContext/ =
>= >
options? F
)F G
:		 
base		 
(		 
options		 
)		 
{

 	
} 	
public 
DbSet 
< 
Student 
> 
Students &
{' (
get) ,
;, -
set. 1
;1 2
}3 4
	protected 
override 
void 
OnModelCreating  /
(/ 0
ModelBuilder0 <
modelBuilder= I
)I J
{ 	
modelBuilder 
. 
Entity 
<  
Student  '
>' (
(( )
)) *
. 
HasKey 
( 
s 
=> 
s 
. 

student_id )
)) *
;* +
} 	
} 
} Ì
./home/azadmin/docker-dotnet-k8s-app/Program.cs
var 
builder 
= 
WebApplication 
. 
CreateBuilder *
(* +
args+ /
)/ 0
;0 1
builder

 
.

 
Services

 
.

 
AddControllers

 
(

  
)

  !
;

! "
builder 
. 
Services 
. 
AddDbContext 
< 
StudentContext ,
>, -
(- .
options. 5
=>6 8
options 
. 
UseMySql 
( 
builder 
. 
Configuration *
.* +
GetConnectionString+ >
(> ?
$str? R
)R S
,S T
new 
MySqlServerVersion 
( 
new "
Version# *
(* +
$num+ ,
,, -
$num. /
,/ 0
$num1 3
)3 4
)4 5
)5 6
)6 7
;7 8
var 
app 
= 	
builder
 
. 
Build 
( 
) 
; 
if 
( 
app 
. 
Environment 
. 
IsDevelopment !
(! "
)" #
)# $
{ 
app 
. %
UseDeveloperExceptionPage !
(! "
)" #
;# $
} 
app 
. 
UseAuthorization 
( 
) 
; 
app 
. 
MapControllers 
( 
) 
; 
app 
. 
Run 
( 
) 	
;	 
